# 图像生成节点

## 基本信息

### 节点名称
图像生成节点 (Image Generation Node)

### 版本信息
- 版本号：1.0.0
- 更新日期：2024-03-15
- 兼容性：Coze平台 2.0及以上版本

### 功能标签
- 图像生成
- AI创作
- 内容生成
- 视觉设计

## 功能描述

### 核心功能
- 通过文字描述生成图片
- 支持参考图引导生成
- 提供多种模型和参数配置
- 支持正负向提示词控制

### 特性列表
- 多种预设模型选择
- 灵活的尺寸配置
- 质量等级调节
- 批量生成支持
- 风格引导控制

### 使用限制
- 单次生成图片数量上限：4张
- 最大支持尺寸：2048*2048
- 图片格式限制：PNG/JPG
- API调用频率限制：10次/分钟

## 接口定义

### 输入参数
| 参数名 | 类型 | 必填 | 说明 | 示例 |
|-------|------|-----|------|------|
| prompt | String | 是 | 正向提示词 | "一只可爱的猫咪" |
| negative_prompt | String | 否 | 负向提示词 | "模糊, 扭曲" |
| model | String | 否 | 模型选择 | "通用" |
| width | Integer | 否 | 图片宽度 | 1024 |
| height | Integer | 否 | 图片高度 | 1024 |
| quality | Float | 否 | 生成质量 | 0.8 |
| reference_image | File | 否 | 参考图片 | - |

### 输出参数
| 参数名 | 类型 | 说明 | 示例 |
|-------|------|------|------|
| images | Array<Image> | 生成的图片列表 | - |
| generation_info | Object | 生成信息 | {"seed": 12345} |
| error | String | 错误信息 | "参数不合法" |

### 配置选项
| 选项名 | 类型 | 默认值 | 说明 |
|-------|------|--------|------|
| batch_size | Integer | 1 | 批量生成数量 |
| seed | Integer | -1 | 随机种子，-1为随机 |
| safety_check | Boolean | true | 是否开启安全检查 |

## 使用指南

### 基础用法
```javascript
// 基础图片生成
const basicGeneration = {
    prompt: "一只可爱的橘猫坐在窗台上",
    model: "通用",
    width: 1024,
    height: 1024
};
```

### 进阶用法
```javascript
// 使用参考图和详细参数
const advancedGeneration = {
    prompt: "一只优雅的白猫",
    negative_prompt: "模糊, 扭曲, 低质量",
    model: "通用",
    width: 1024,
    height: 1024,
    quality: 0.9,
    reference_image: "cat_reference.jpg",
    batch_size: 4,
    seed: 12345
};
```

### 最佳实践
1. 提供清晰、具体的提示词描述
2. 使用负向提示词排除不想要的元素
3. 选择合适的图片尺寸和质量参数
4. 保存有效的种子值以便复现

## 常见问题

### 问题列表
1. Q: 生成的图片质量不理想怎么办？
   A: 可以通过提高quality参数，使用更详细的提示词，以及添加适当的负向提示词来改善。

2. Q: 如何让生成的图片更符合预期？
   A: 可以使用参考图功能，并在提示词中详细描述需要的风格和细节。

### 故障排除
1. 生成失败
   - 原因：参数设置不当或服务器负载过高
   - 解决方案：检查参数是否合法，稍后重试

2. 图片风格不一致
   - 原因：提示词描述不够具体
   - 解决方案：优化提示词，添加风格相关描述

## 性能优化

### 优化建议
1. 合理设置图片尺寸，避免过大
2. 批量生成时控制并发数量
3. 使用缓存机制存储常用结果
4. 优化提示词以提高生成效率

### 性能指标
| 指标名称 | 参考值 | 说明 |
|---------|--------|------|
| 响应时间 | <5s | 单张图片生成时间 |
| 并发数 | 10/min | 每分钟最大请求数 |
| 成功率 | >95% | 生成成功率 |

## 示例场景

### 场景一：产品展示图生成
1. 场景描述：生成电商产品展示图
2. 实现方案：使用产品实物参考图+场景提示词
3. 示例代码：
```javascript
const productShowcase = {
    prompt: "产品在简约白色背景上的精致展示",
    reference_image: "product.jpg",
    model: "通用",
    width: 1024,
    height: 1024,
    quality: 0.9
};
```
4. 注意事项：注意光线和构图的描述

### 场景二：艺术创作
1. 场景描述：生成艺术风格图像
2. 实现方案：使用详细的风格描述和参考图
3. 示例代码：
```javascript
const artCreation = {
    prompt: "梵高风格的星空下的城市",
    negative_prompt: "模糊, 扭曲",
    model: "艺术",
    width: 1024,
    height: 1024,
    quality: 1.0
};
```
4. 注意事项：重点描述艺术风格特征

## 版本历史

### 更新记录
| 版本号 | 更新日期 | 更新内容 |
|-------|----------|----------|
| 1.0.0 | 2024-03-15 | 首次发布 |
| 1.0.1 | 2024-03-20 | 添加参考图功能 |

### 废弃特性
1. 旧版风格预设 - 废弃于版本1.0.0
2. 固定尺寸限制 - 废弃于版本1.0.1

## 相关资源

### 参考文档
- [提示词优化指南](../guides/prompt_optimization.md)
- [图像生成最佳实践](../guides/image_generation_best_practices.md)
- [常见问题解答](../guides/faq.md)

### 示例代码
- [图像生成示例库](../examples/image_generation_examples.md)
- [在线演示](https://demo.coze.cn/image-generation)
- [视频教程](https://tutorial.coze.cn/image-generation) 